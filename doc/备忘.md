
### 关于心跳的设计

父进程目前共两个线程: 转发线程与监控线程。
监控线程作用目前有两个: 1. 根据心跳判断子进程是否挂掉；2. 进程的清理。
因为处理起来比较麻烦，且心跳接收所占资源应该很少，所以转发与心跳接收处于同一线程，并未分离。
为了避免因共享心跳加锁同步导致转发线程效率降低，转发线程中在处理时会计算最近一段时间内的心跳掩码，达到某种条件时即重启子进程

----
### 锁的定义
- 定义了一把锁，不过只用于子进程中，父进程虽然也有队列，但作用是解耦，对队列的操作是串行化的。
- 锁在子进程中用于保护线程队列与进程队列。